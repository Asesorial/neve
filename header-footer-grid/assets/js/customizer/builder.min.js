!function(){"use strict";var s,o=function(e){return"object"==typeof e?null!==e:"function"==typeof e},I=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e},d=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},u=function(e){return Object(d(e))},t=Math.ceil,i=Math.floor,P=function(e){return isNaN(e=+e)?0:(0<e?i:t)(e)},n=Math.min,A=function(e){return 0<e?n(P(e),9007199254740991):0},z=(s=!0,function(e,t){var i,n,o=String(d(e)),r=P(t),a=o.length;return r<0||a<=r?s?"":void 0:(i=o.charCodeAt(r))<55296||56319<i||r+1===a||(n=o.charCodeAt(r+1))<56320||57343<n?s?o.charAt(r):i:s?o.slice(r,r+2):n-56320+(i-55296<<10)+65536}),r={}.toString,c=function(e){return r.call(e).slice(8,-1)};function e(e,t){return e(t={exports:{}},t.exports),t.exports}var a,l,v=e(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),p=(v.version,e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),f=e(function(e){var t="__core-js_shared__",i=p[t]||(p[t]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),g=0,h=Math.random(),w=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++g+h).toString(36))},m=e(function(e){var t=f("wks"),i=p.Symbol,n="function"==typeof i;(e.exports=function(e){return t[e]||(t[e]=n&&i[e]||(n?i:w)("Symbol."+e))}).store=t}),b=m("toStringTag"),x="Arguments"==c(function(){return arguments}()),y=RegExp.prototype.exec,D=function(e,t){var i,n,o,r,a=e.exec;if("function"==typeof a){var s=a.call(e,t);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==(void 0===(i=e)?"Undefined":null===i?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(n=Object(i),b))?o:x?c(n):"Object"==(r=c(n))&&"function"==typeof n.callee?"Arguments":r))throw new TypeError("RegExp#exec called on incompatible receiver");return y.call(e,t)},C=RegExp.prototype.exec,S=String.prototype.replace,k=C,E="lastIndex",M=(a=/a/,l=/b*/g,C.call(a,"a"),C.call(l,"a"),0!==a[E]||0!==l[E]),T=void 0!==/()??/.exec("")[1];(M||T)&&(k=function(e){var t,i,n,o,r=this;return T&&(i=new RegExp("^"+r.source+"$(?!\\s)",function(){var e=I(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}.call(r))),M&&(t=r[E]),n=C.call(r,e),M&&n&&(r[E]=r.global?n.index+n[0].length:t),T&&n&&1<n.length&&S.call(n[0],i,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n});var R=k,j=function(e){try{return!!e()}catch(e){return!0}},O=!j(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),F=p.document,G=o(F)&&o(F.createElement),W=!O&&!j(function(){return 7!=Object.defineProperty((e="div",G?F.createElement(e):{}),"a",{get:function(){return 7}}).a;var e}),U=Object.defineProperty,L={f:O?Object.defineProperty:function(e,t,i){if(I(e),t=function(e,t){if(!o(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!o(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!o(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!o(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}(t,!0),I(i),W)try{return U(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},N=O?function(e,t,i){return L.f(e,t,{enumerable:!((n=1)&n),configurable:!(2&n),writable:!(4&n),value:i});var n}:function(e,t,i){return e[t]=i,e},X={}.hasOwnProperty,$=function(e,t){return X.call(e,t)},H=f("native-function-to-string",Function.toString),V=e(function(e){var r=w("src"),t="toString",a=(""+H).split(t);v.inspectSource=function(e){return H.call(e)},(e.exports=function(e,t,i,n){var o="function"==typeof i;o&&($(i,"name")||N(i,"name",t)),e[t]!==i&&(o&&($(i,r)||N(i,r,e[t]?""+e[t]:a.join(String(t)))),e===p?e[t]=i:n?e[t]?e[t]=i:N(e,t,i):(delete e[t],N(e,t,i)))})(Function.prototype,t,function(){return"function"==typeof this&&this[r]||H.call(this)})}),B=function(n,o,e){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(n),void 0===o)return n;switch(e){case 1:return function(e){return n.call(o,e)};case 2:return function(e,t){return n.call(o,e,t)};case 3:return function(e,t,i){return n.call(o,e,t,i)}}return function(){return n.apply(o,arguments)}},J="prototype",Q=function(e,t,i){var n,o,r,a,s=e&Q.F,c=e&Q.G,l=e&Q.S,d=e&Q.P,f=e&Q.B,u=c?p:l?p[t]||(p[t]={}):(p[t]||{})[J],g=c?v:v[t]||(v[t]={}),h=g[J]||(g[J]={});for(n in c&&(i=t),i)r=((o=!s&&u&&void 0!==u[n])?u:i)[n],a=f&&o?B(r,p):d&&"function"==typeof r?B(Function.call,r):r,u&&V(u,n,r,e&Q.U),g[n]!=r&&N(g,n,a),d&&h[n]!=r&&(h[n]=r)};p.core=v,Q.F=1,Q.G=2,Q.S=4,Q.P=8,Q.B=16,Q.W=32,Q.U=64,Q.R=128;var q=Q;q({target:"RegExp",proto:!0,forced:R!==/./.exec},{exec:R});var K=m("species"),Y=!j(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Z=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),ee=Math.max,te=Math.min,ie=Math.floor,ne=/\$([$&`']|\d\d?|<[^>]*>)/g,oe=/\$([$&`']|\d\d?)/g;function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(i,e,t){var n=m(i),r=!j(function(){var e={};return e[n]=function(){return 7},7!=""[i](e)}),o=r?!j(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===i&&(t.constructor={},t.constructor[K]=function(){return t}),t[n](""),!e}):void 0;if(!r||!o||"replace"===i&&!Y||"split"===i&&!Z){var a=/./[n],s=t(d,n,""[i],function(e,t,i,n,o){return t.exec===R?r&&!o?{done:!0,value:a.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),c=s[0],l=s[1];V(String.prototype,i,c),N(RegExp.prototype,n,2==e?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}}("replace",2,function(o,r,C,S){return[function(e,t){var i=o(this),n=null==e?void 0:e[r];return void 0!==n?n.call(e,i,t):C.call(String(i),e,t)},function(e,t){var i=S(C,e,this,t);if(i.done)return i.value;var n=I(e),o=String(this),r="function"==typeof t;r||(t=String(t));var a=n.global;if(a){var s=n.unicode;n.lastIndex=0}for(var c,l,d=[];;){var f=D(n,o);if(null===f)break;if(d.push(f),!a)break;""===String(f[0])&&(n.lastIndex=(c=o,(l=A(n.lastIndex))+(s?z(c,l).length:1)))}for(var u,g="",h=0,v=0;v<d.length;v++){f=d[v];for(var p=String(f[0]),w=ee(te(P(f.index),o.length),0),m=[],b=1;b<f.length;b++)m.push(void 0===(u=f[b])?u:String(u));var _=f.groups;if(r){var x=[p].concat(m,w,o);void 0!==_&&x.push(_);var y=String(t.apply(void 0,x))}else y=k(p,o,w,m,_,t);h<=w&&(g+=o.slice(h,w)+y,h=w+p.length)}return g+o.slice(h)}];function k(r,a,s,c,l,e){var d=s+r.length,f=c.length,t=oe;return void 0!==l&&(l=u(l),t=ne),C.call(e,t,function(e,t){var i;switch(t.charAt(0)){case"$":return"$";case"&":return r;case"`":return a.slice(0,s);case"'":return a.slice(d);case"<":i=l[t.slice(1,-1)];break;default:var n=+t;if(0===n)return e;if(f<n){var o=ie(n/10);return 0===o?e:o<=f?void 0===c[o-1]?t.charAt(1):c[o-1]+t.charAt(1):e}i=c[n-1]}return void 0===i?"":i})}});var ae=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==c(e)?e.split(""):Object(e)},se=Array.isArray||function(e){return"Array"==c(e)},ce=m("species"),le=function(e,t){return se(i=e)&&("function"!=typeof(n=i.constructor)||n!==Array&&!se(n.prototype)||(n=void 0),o(n)&&null===(n=n[ce])&&(n=void 0)),new(void 0===n?Array:n)(t);var i,n},de=m("unscopables"),fe=Array.prototype;null==fe[de]&&N(fe,de,{});var ue,ge,he,ve,pe,we,me,be,_e,xe,ye,Ce,Se,ke,Ie,Pe,Ae,ze,De,Ee=(he=1==(ue=5),ve=2==ue,pe=3==ue,we=4==ue,me=6==ue,be=5==ue||me,_e=ge||le,function(e,t,i){for(var n,o,r=u(e),a=ae(r),s=B(t,i,3),c=A(a.length),l=0,d=he?_e(e,c):ve?_e(e,0):void 0;l<c;l++)if((be||l in a)&&(o=s(n=a[l],l,r),ue))if(he)d[l]=o;else if(o)switch(ue){case 3:return!0;case 5:return n;case 6:return l;case 2:d.push(n)}else if(we)return!1;return me?-1:pe||we?we:d}),Me="find",Te=!0;Me in[]&&Array(1)[Me](function(){Te=!1}),q(q.P+q.F*Te,"Array",{find:function(e){return Ee(this,e,1<arguments.length?arguments[1]:void 0)}}),xe=Me,fe[de][xe]=!0,Ce=jQuery,Se=Ce(document),ke=wp.customize||null,Ie=HFG_Layout_Builder.isRTL,ye=function(s,c){var e={id:c,controlId:"",cols:12,cellHeight:45,items:[],container:null,widgetsSidebar:null,ready:!1,devices:{desktop:"Desktop",mobile:"Mobile/Tablet"},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,insertPoint:null,insertRow:null,insertPointCoords:{},getTemplate:_.memoize(function(){var n=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-customize-control-"+n.type),!_.isUndefined(i)&&_.isString(i)?o.variable=i:o.variable="data",_.template(Ce("#"+t).html(),null,o)(e)}}),drag_drop:function(){var o=this;Ce(".hfg--device-panel",o.container).each(function(){var i=Ce(this),n=i.data("device");o.panels[n]={},Ce(".hfg--cb-items",i).each(function(e){var t=Ce(this).attr("data-id")||"",i="_sid_"+n+e;t&&(i="_sid_"+n+"-"+t),Ce(this).attr("id",i)}),Ce(".grid-stack",i).each(function(){var e=Ce(this).attr("data-id")||"";o.panels[n][e]=Ce(this),Ce(this).droppable({out:function(e,t){},over:function(e,t){},drop:function(e,t){var i=Ce(this);o.gridster(i,t,e),console.log(e),console.log(t),console.log(i),o.save()}})});var e=Ce("#_sid_mobile-sidebar",i),t=e.attr("id")||!1;Ce(".hfg-available-items .grid-stack-item",i).draggable({revert:"invalid",connectToSortable:!!t&&"#"+t,start:function(e,t){Ce("body").addClass("builder-item-moving"),Ce(".hfg--cb-items",i).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){Ce("body").removeClass("builder-item-moving"),Ce(".hfg--cb-items",i).css("z-index",""),t.helper.parent().css("z-index","")}}),0<e.length&&(e.sortable({revert:!0,change:function(e,t){o.save()},receive:function(e,t){Ce(this).find(".grid-stack-item").removeAttr("style").attr("data-gs-width",1),o.save()}}),o.panels[n].sidebar=e),Ce(".hfg-available-items .grid-stack-item",i).resizable({handles:"w, e",stop:function(e,t){o.setGridWidth(t.element.parent(),t),o.save()}})})},sortGrid:function(e){Ce(".grid-stack-item",e).each(function(){var e=Ce(this),t=e.attr("data-gs-x")||0;t=parseInt(t);var i=e.next();if(0<i.length){var n=i.attr("data-gs-x")||0;(n=parseInt(n))<t&&e.insertAfter(i)}})},getX:function(e){var t=e.attr("data-gs-x")||0;return parseInt(t)},getW:function(e,t){var i;return _.isUndefined(t)&&(t=!1),i=t?e.attr("data-df-width")||1:e.attr("data-gs-width")||1,parseInt(i)},gridGetItemInfo:function(e,t,i){var n,o=this.getX(e),r=this.getW(e),a=0,s=0,c=!1;for(n=o-1;0<=n&&!c;)0===t[n]?a++:c=!0,n--;for(c=!1,n=o+r;n<this.cols&&!c;)0===t[n]?s++:c=!0,n++;return{flag:t,x:o,w:r,item:e,before:a,after:s,id:e.attr("data-id")||"",wrapper:i}},updateItemsPositions:function(e){for(var t=this.cols,i=0;i<=t;i++)"object"!==re(e[i])&&"function"!=typeof e[i]||e[i].attr("data-gs-x",i)},gridster:function(e,t,i){var g=[],h=this.cols,v=function(e){for(var t=e.x,i=e.w,n=e.el,o=t;o<t+i;o++)g[o]=o===t?n:1},c=function(e){for(var t=e.x,i=e.w,n=t;n<t+i;n++)g[n]=0},p=function(e,t){for(var i=0,n=e;n<h;n++)if(0===g[n])i++;else if(t)return i;return i},w=function(e,t){var i=0;void 0===t&&(t=!1);for(var n=e;0<=n;n--)if(0===g[n])i++;else if(t)return i;return i},m=function(e){return 0===g[e]},b=function(e,t){for(var i=e;i<e+t;){if(0!==g[i])return!1;i++}return!0},x=function(e){if(e<0)return{x:-1,w:1};var t,i,n,o=-1;if(g[e]<=1)for(t=e,n=!1;0<=t&&!n;)1!==g[t]&&0!==g[t]&&(o=t,n=!0),t--;else o=e;for(t=o+1,i=o;1===g[t];)i++,t++;return{x:o,w:i+1-o}},y=function(e){var t,i,n,o=-1;if(g[e]<h)for(t=e,n=!1;t<h&&!n;)1!==g[t]&&0!==g[t]&&(o=t,n=!0),t++;else o=e;for(t=o+1,i=o;1===g[t];)i++,t++;return{x:o,w:i+1-o}},C=function(e,t){var i=g.slice(),n=w(e);if(0===n)return t;var o=x(e),r=0<=o.x?o.x+o.w-1:e,a=t;n<t&&(a=n);for(var s=0,c=0,l=r;c<=a&&0<=l;)0===g[l]&&(c++,s=l),l--;var d=[],f=0;for(l=s;l<=r;l++)(g[l]=0)!==i[l]&&(d[f]=i[l],f++);for(f=0,l=s;l<=r;l++)void 0!==d[f]?g[l]=d[f]:g[l]=0,f++;return t-a},S=function(e,t){var i=g.slice(),n=p(e);if(0===n)return t;var o=x(e),r=0<=o.x?o.x:e,a=t;n<t&&(a=n);for(var s=e,c=0,l=r;c<a&&l<h;)0===g[l]&&(c++,s=l),l++;var d=[],f=0;for(l=r;l<=s;l++)(g[l]=0)!==i[l]&&(d[f]=i[l],f++);for(f=d.length-1,l=s;r<=l;l--)void 0!==d[f]?g[l]=d[f]:g[l]=0,f--;return t-a},k=function(){I.updateItemsPositions(g)},l=function(e,t){var i,n,o,r,a,s,d=e.x,c=e.w,l=function(){for(var e=0,t=0;t<h;t++)0===g[t]&&e++;return e}();if(l<=0)return!1;if(_.isUndefined(t)&&(t=!1),!t){if(m(d)){if(b(d,r=c))return v(e),e.el.attr("data-gs-x",d),e.el.attr("data-gs-width",r),!0;for((i=c<=(n=p(d,!0))+(o=w(d-1,!0))&&c-n<=o?d-(c-n):d-o)<0&&(i=0);1<=r;){if(b(i,r))return e.x=i,e.w=r,v(e),e.el.attr("data-gs-x",i),e.el.attr("data-gs-width",r),!0;r--}}if(1===g[d]){var f=x(d);if(0<=f.x&&d>f.x+Math.floor(f.w/2)&&d>f.x&&(i=f.x+f.w,c<=(n=p(i,!0))))return v({el:e.el,x:i,w:c}),e.el.attr("data-gs-x",i),e.el.attr("data-gs-width",c),!0}}console.log("--------------------------------------------------------"),function(e,t){var i,n,o,r,a=0,s=!1;if(console.log("insert at x",t),console.log("insert node",e),m(t)){if(console.log("empty_at_X",t),i=x(t),n=y(t),-1<i.x){if(console.log("found_item_left",i),(a=p(i.x))>=e.w)if(b(t,e.w))console.log("found",e),d=t,s=!0;else if(e.ox>t)for(o=i.x+i.w,r=(r=w(o))<=e.w?e.w-r:e.w,S(o+1,r),a=p(o),console.log("loop_start_i",o);o>i.x+i.w&&!s;)b(o,e.w)&&(console.log("found_in_loop__i",o),d=o,s=!0),o--;if(!s&&e.ox<t){console.log("try_move_items_to_left",i),o=i.x+i.w-1,r=w(i.x),console.log("el",r),r>e.w&&(r=e.w),r-=2,C(i.x,r),console.log("try_move_items_to_left_flag",g),console.log("el2",r),o-=a=p(o),n=y(t);var c=i.x+i.w;for(-1<n.x&&(c=n.x),console.log("loop_start 2_i",o);o<c&&!s;)b(o,e.w)&&(console.log("found_in_loop__@__i",o),d=o,s=!0),o++}s||(d=i.x+i.w,e.w=a,e.x=d,console.log("resize_new_w",a),console.log("resize_new_x",d))}else if(-1<n.x){console.log("found_item_right",n),n=y(t),a=p(t,!1),console.log("move_all_item_to Right");var l=a>=e.w?e.w:a;for(S(t,l),o=n.x,console.log("loop_start Right",o);0<=o&&!s;)b(o,e.w)&&(d=o,e.x=d,s=!0,console.log("found_in_while_r",o)),o--;s||(d=t,e.w=a,e.x=d,console.log("resize_r_new_w",a),console.log("resize_r_new_x",d))}}else if(console.log("x is not empty"),i=x(t),e.ox<i.x)if(C(t,e.w),console.log("Move All items to left"),m(t))d=t;else{for(;!m(t)&&t<=I.cols-1;)t++;d=t}else if(S(t,e.w),console.log("Move All items to right"),m(t))d=t;else{for(;!m(t)&&0<=t;)t--;d=t}d>I.cols&&(d=I.cols-1),e.x=d,console.log("new node x",d)}(e,_.clone(d));var u=0;for(d+c>I.cols-1&&(u=w(d,!0),console.log("le",u),0<u&&console.log("move_Left",d+c-I.cols-1)),k();1<=c;){if(c<=l){if(b(d,c))return console.log("",{x:d,w:c}),e.w=c,v(e),e.el.attr("data-gs-x",d),e.el.attr("data-gs-width",c),!0;for(u=w(d,!0),a=d-u,console.log("newX",a),s=a;s<h;){if(b(s,c))return console.log("Insert in While",{x:s,w:c}),e.w=c,v({el:e.el,x:s,w:c}),e.el.attr("data-gs-x",s),e.el.attr("data-gs-width",c),!0;s++}}c--}for(c=e.w;1<=c;){for(s=0;s<h;){if(b(s,c))return console.log("Insert in While 2",{x:s,w:c}),v({el:e.el,x:s,w:c}),e.el.attr("data-gs-x",s),e.el.attr("data-gs-width",c),!0;s++}c--}return console.log("Insert END While",{x:s,w:c}),!1},I=this,n=(g=I.getFlag(e)).slice(),o=e.offset();I.draggingItem=t.draggable;var r,a,s,d,f,u=e.width(),P=u/I.cols,A=t.offset;s=I.getW(t.draggable,!1),a=I.getW(t.draggable,!0),d=t.draggable.width(),console.log("DROP ITEM WIDTH",a),console.log("DROP ITEM cw WIDTH",s);var z=I.getX(t.draggable);Ie&&c({el:t.draggable,x:z,w:a});var D,E=0,M=0,T=!1;if(t.draggable.parent().is(e)?(f=!0,console.log("Item in this row"),a=s):(f=!1,console.log("Not in this row"),a<s&&(a=s)),Ie?(E=Math.round((o.left+u+10-i.clientX)/P),(M=Math.round((o.left+u-(A.left+d+10))/P))<0&&(M=0)):(E=Math.round((i.clientX-o.left)/P),(M=Math.round((A.left-o.left-10)/P))<0&&(M=0)),E>I.cols&&(E=I.cols),D=r=M,Ie){if(!m(D))for(;D<I.cols&&!T;)m(D)?T=!0:D++}else if(!m(r)){for(;r<=E&&!T;)m(r)?T=!0:r++;E<r&&(r=E)}if(T||(r=f?M:E),r<0&&(r=0),r+a>=I.cols){for(T=!0,D=r;D+a>I.cols&&T;)m(D)?D--:(D++,T=!1);r=D}var R={el:t.draggable,x:r,w:a,ox:z,ow:s};R.x<=0&&(R.x=0);var j=!1;f?(R.x=parseInt(t.draggable.attr("data-gs-x")||0),R.w=parseInt(t.draggable.attr("data-gs-width")||1),function(e,t){var i=e.w;c(e);var n=x(t),o=0;if(-1<n.x&&(o=n.x+n.w),b(t,i))return v({el:e.el,x:t,w:i});if(0<o&&b(o,i)&&o<=t){var r=y(t);if(-1<r.x&&e.w+t>=r.x)for(var a=_.clone(t);o<a;){if(b(a,i))return v({el:e.el,x:a,w:i});a--}if(t+i>I.cols){var s=I.cols-i;if(b(s,i))return v({el:e.el,x:s,w:i})}return v({el:e.el,x:o,w:i})}e.x=t,l(e,!0)}(R,r),j=!0):(j=l(R),R.el[0].dataset&&Ce("#accordion-section-"+R.el[0].dataset.section).removeClass("hfg-section-inactive")),j?(t.draggable.removeClass("item-from-list"),e.append(t.draggable),t.draggable.removeAttr("style"),console.log("DID Flag: ",g),I.draggingItem=null):(t.draggable.removeAttr("style"),console.log("Can not insert"),g=n),k(),I.updateAllGrids()},updateAllGrids:function(){var i=this;_.each(i.panels[i.activePanel],function(e,t){i.updateGridFlag(e)})},setGridWidth:function(e,t){var i,n,o=this,r=t.element,a=e.width(),s=t.size.width,c=t.originalSize.width,l=Math.ceil(a/o.cols)-1;n=Ie?(i=t.originalPosition.left>t.position.left,c!==s):(i=t.originalPosition.left>t.position.left,t.originalPosition.left<t.position.left);var d,f,u,g=t.originalElement.attr("data-gs-width")||1,h=t.originalElement.attr("data-gs-x")||0;g=parseInt(g),h=parseInt(h);var v,p=o.getFlag(e),w=o.gridGetItemInfo(t.originalElement,p,e);if(i)return Ie?(f=Math.floor((t.position.left-1)/l),(d=(f=o.cols-f)-h-g)>w.after&&(d=w.after),u=g+d,r.attr("data-gs-x",h).removeAttr("style")):((d=h-(f=Math.floor((t.position.left-1)/l)))>w.before&&(d=w.before),f=h-d,u=g+d,r.attr("data-gs-x",f).removeAttr("style")),r.attr("data-gs-width",u).removeAttr("style"),void o.updateGridFlag(e);if(n)return Ie?t.originalPosition.left!==t.position.left?(f=Math.floor((t.position.left-1)/l),g<(d=g+h-(f=o.cols-f))&&(d=0),u=g-d,(f=h)<=0&&(f=0),console.log("diffRight_RTL_COL_New __left")):(f=Math.ceil((t.position.left+t.size.width-11)/l),(d=h-(f=o.cols-f))>w.before&&(d=w.before),f=h-d,u=g+d):((u=g-(d=(f=Math.round((t.position.left-1)/l))-h))<=0&&(u=1,d=0),f=h+d),r.attr("data-gs-x",f).removeAttr("style"),r.attr("data-gs-width",u).removeAttr("style"),void o.updateGridFlag(e);var m,b=w.x;m=Math.ceil((t.position.left+t.size.width-11)/l),v=w.w+(m-(b+w.w)),w.x+v>w.x+w.w+w.after&&(v=w.w+w.after),s<t.originalSize.width&&((m=Math.round((t.position.left+t.size.width-11)/l))<=b&&(m=b+1),v=w.w-(b+w.w-m)),v<=0&&(v=1),r.attr("data-gs-width",v).removeAttr("style"),o.updateGridFlag(e)},getFlag:function(e){var t,i=e.data("gridRowFlag")||[];if(_.isEmpty(i)){for(t=0;t<this.cols;t++)i[t]=0;e.data("gridRowFlag",i)}return i},updateGridFlag:function(e){var n,o=this,r=[];for(n=0;n<o.cols;n++)r[n]=0;return Ce(".grid-stack-item",e).each(function(e){Ce(this).removeAttr("style");var t=o.getX(Ce(this)),i=o.getW(Ce(this));for(n=t;n<t+i;n++)r[n]=n===t?Ce(this):1}),e.data("gridRowFlag",r),o.updateItemsPositions(r),o.sortGrid(e),r},addNewWidget:function(e,t){var i=this,n=i.container.find(".hfg--device-panel.hfg--panel-"+i.activePanel),o=t;_.isObject(o)||(o=n.find(".hfg--cb-items").first());var r=e;r.draggable({revert:"invalid",appendTo:n,scroll:!1,zIndex:99999,handle:".grid-stack-item-content",start:function(e,t){Ce("body").addClass("builder-item-moving"),Ce(".hfg--cb-items",n).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){Ce("body").removeClass("builder-item-moving"),Ce(".hfg--cb-items",n).css("z-index",""),i.save()},drag:function(e,t){}}).resizable({handles:"w, e",start:function(e,t){t.originalElement.css({right:"auto",left:t.position.left})},stop:function(e,t){i.setGridWidth(t.element.parent(),t),i.save()}}),o.append(r),i.updateGridFlag(o),r[0]&&Ce("#accordion-section-"+r[0].dataset.section).removeClass("hfg-section-inactive")},addPanel:function(e){var t=this.getTemplate(),i="tmpl-hfg--cb-panel";if(0!==Ce("#"+i).length)return _.isObject(s.rows)||(s.rows={}),'<div class="hfg--device-panel hfg-vertical-panel hfg--panel-'+e+'" data-device="'+e+'">'+t({device:e,id:s.id,rows:s.rows},i)+"</div>"},addDevicePanels:function(){var n=this;_.each(n.devices,function(e,t){var i=n.addPanel(t);Ce(".hfg--cb-devices-switcher",n.container).append('<a href="#" class="switch-to switch-to-'+t+'" data-device="'+t+'"><span class="icon '+t+'-icon"></span><span>'+e+"</span></a>"),Ce(".hfg--cb-body",n.container).append(i),console.log(n.widgetSidebarContainer),Ce(".hfg-widgets-panel-inner",n.widgetSidebarContainer).append('<div class=" hfg--widgets hfg--widgets-'+t+'" data-device="'+t+'"></div>')});var e=Ce("#hfg-upsell-tmpl");e.length&&Ce(e.html()).insertAfter(Ce(".hfg--cb-devices-switcher",n.container))},addItem:function(e){var t=this.getTemplate(),i="tmpl-hfg--cb-item";if(0!==Ce("#"+i).length){var n=t(e,i);return Ce(n)}},addAvailableItems:function(){var r=this;_.each(r.devices,function(e,o){var t=Ce('<div class="hfg-available-items" data-device="'+o+'"></div>');Ce(".hfg--panel-"+o,r.container).append(t),_.each(r.items,function(e){var t=!0;if(!_.isUndefined(e.devices)&&!_.isEmpty(e.devices))if(_.isString(e.devices))e.devices!==o&&(t=!1);else{var i=!1;_.each(e.devices,function(e){o===e&&(i=!0)}),i||(t=!1)}if(t){var n=r.addItem(e);Ce(".hfg--widgets-"+o,r.widgetSidebarContainer).append(n),Ce("#accordion-section-"+e.section).addClass("hfg-section-inactive")}})})},switchToDevice:function(e,t){var i=this;1<_.size(i.devices)?(Ce(".hfg--cb-devices-switcher a",i.container).removeClass("hfg--tab-active"),Ce(".hfg--cb-devices-switcher .switch-to-"+e,i.container).addClass("hfg--tab-active"),Ce(".hfg--device-panel",i.container).addClass("hfg--panel-hide"),Ce(".hfg--device-panel.hfg--panel-"+e,i.container).removeClass("hfg--panel-hide"),i.activePanel=e,Ce(".hfg--device-panel .hfg-available-items .item-from-list").each(function(e,t){Ce("#accordion-section-"+Ce(t)[0].dataset.section).removeClass("hfg-section-inactive")}),Ce(".hfg--device-panel.hfg--panel-"+e+" .hfg-available-items .item-from-list").each(function(e,t){Ce("#accordion-section-"+Ce(t)[0].dataset.section).addClass("hfg-section-inactive")})):(Ce(".hfg--device-panel.hfg--panel-"+e+" .hfg-available-items .item-from-list").each(function(e,t){Ce("#accordion-section-"+Ce(t)[0].dataset.section).addClass("hfg-section-inactive")}),Ce(".hfg--cb-devices-switcher a",i.container).addClass("hfg--tab-active")),(_.isUndefined(t)||t)&&("desktop"===e?Ce("#customize-footer-actions .preview-desktop").trigger("click"):Ce("#customize-footer-actions .preview-mobile").trigger("click"))},addExistingRowsItems:function(){var a=this,t=!1;ke.control(a.controlId).setting.get()&&(t=JSON.parse(ke.control(a.controlId).setting.get())),_.isObject(t)||(t={}),_.each(a.panels,function(o,r){var e={};_.isObject(t[r])&&(e=t[r]),_.each(e,function(e,n){_.isUndefined(e)||_.each(e,function(e,t){var i=Ce('.hfg--widgets[data-device="'+r+'"] .grid-stack-item[data-id="'+e.id+'"]').first();i.attr("data-gs-width",e.width),i.attr("data-gs-x",e.x),i.removeClass("item-from-list"),a.addNewWidget(i,o[n]),Ce("#accordion-section-"+e.id).removeClass("hfg-section-inactive")})})}),a.ready=!0},focus:function(){this.container.on("click",".hfg--cb-item-setting, .hfg--cb-item-name, .item-tooltip",function(e){e.preventDefault();var t=Ce(this).data("section")||"",i=Ce(this).attr("data-control")||"",n=!1;i&&(_.isUndefined(ke.control(i))||(ke.control(i).focus(),n=!0)),n||t&&!_.isUndefined(ke.section(t))&&ke.section(t).focus()}),this.container.on("click",".hfg--cb-row-settings",function(e){e.preventDefault();var t=Ce(this).attr("data-id")||"",i=s.id+"_"+t;_.isUndefined(ke.section(i))||ke.section(i).focus()})},closeComponentsSidebar:function(){Ce(".widgets-panel--visible").removeClass("widgets-panel--visible"),Ce(".hfg--widgets.widgets--visible").removeClass("widgets--visible"),Ce("body").removeClass("hfg--widgets-open")},initComponentsSidebar:function(){var i=this;Ce(i.container).on("click",".add-button--grid",function(e){e.preventDefault(),i.closeComponentsSidebar(),Ce("body").addClass("hfg--widgets-open");var t=Ce(this).closest(".hfg--device-panel")[0].getAttribute("data-device");i.insertPoint=Ce(this).data("slot"),i.insertRow=Ce(this).closest(".hfg--cb-items"),i.insertPointCoords={},Ce(i.widgetSidebarContainer).addClass("widgets-panel--visible"),Ce(i.widgetSidebarContainer).find(" .hfg--widgets-"+t).addClass("widgets--visible")}),Ce(".hfg-widgets-panel-header .close").on("click",function(e){i.closeComponentsSidebar()}),Ce(i.widgetSidebarContainer).on("click",".grid-stack-item",function(e){console.log(i.insertPoint),console.log(i.insertRow)})},remove:function(){var n=this;Ce(n.container).on("click",".hfg--device-panel .hfg--cb-item-remove",function(e){e.preventDefault();var t=Ce(this).closest(".grid-stack-item"),i=t.closest(".hfg--device-panel")[0].getAttribute("data-device");t.attr("data-gs-width",1),t.attr("data-gs-x",0),t.removeAttr("style"),Ce(n.widgetSidebarContainer).find(".hfg--widgets-"+i).append(t),Ce("#accordion-section-"+t[0].dataset.section).addClass("hfg-section-inactive"),n.updateAllGrids(),n.save()})},encodeValue:function(e){return JSON.stringify(e)},decodeValue:function(e){return JSON.parse(e)},save:function(){var n=this;if(n.ready){var o={};_.each(n.panels,function(e,i){o[i]={},_.each(e,function(e,t){o[i][t]=_.map(Ce(" > .grid-stack-item",e),function(e){return e=Ce(e),{x:n.getX(e),y:1,width:n.getW(e),height:1,id:e.data("id")||""}})})}),ke.control(n.controlId).setting.set(n.encodeValue(o))}},showPanel:function(){var t=this;this.container.removeClass("hfg--builder--hide").addClass("hfg--builder-show"),setTimeout(function(){var e=t.container.height();Ce("#customize-preview").addClass("cb--preview-panel-show").css({bottom:e-1,"margin-top":"0px"})},100)},hidePanel:function(){this.container.removeClass("hfg--builder-show"),Ce("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var t=this;ke.state("expandedPanel").bind(function(e){ke.panel(s.panel).expanded()?(Se.trigger("hfg_panel_builder_open",[s.panel]),top._current_builder_panel=c,t.showPanel()):(t.hidePanel(),t.closeComponentsSidebar())}),t.container.on("click",".hfg--panel-close",function(e){e.preventDefault(),t.container.toggleClass("hfg--builder--hide"),t.container.hasClass("hfg--builder--hide")?Ce("#customize-preview").removeClass("cb--preview-panel-show"):Ce("#customize-preview").addClass("cb--preview-panel-show")})},panelLayoutCSS:function(){var e=Ce("#customize-controls").width();ke.state("paneVisible").get()||(e=0),Ie?this.container.find(".hfg--cb-inner").css({"margin-right":e}):this.container.find(".hfg--cb-inner").css({"margin-left":e})},init:function(e,t,i){var n=this,o=n.getTemplate(),r=o(s,"tmpl-hfg--builder-panel"),a=o(s,"tmpl-hfg--widgets-sidebar");n.container=Ce(r),n.widgetSidebarContainer=Ce(a),Ce("body .wp-full-overlay").append(n.container).append(n.widgetSidebarContainer),n.controlId=e,n.items=t,n.devices=i,s.section&&ke.section(s.section).container.addClass("hfg--hide"),n.addDevicePanels(),n.switchToDevice(n.activePanel),n.addAvailableItems(),n.switchToDevice(n.activePanel),n.drag_drop(),n.initComponentsSidebar(),n.focus(),n.remove(),n.addExistingRowsItems(),ke.panel(s.panel).expanded()?n.showPanel():(n.hidePanel(),n.closeComponentsSidebar()),ke.previewedDevice.bind(function(e){"desktop"===e?n.switchToDevice("desktop",!1):n.switchToDevice("mobile",!1)}),n.togglePanel(),ke.state("paneVisible").get()&&n.panelLayoutCSS(),ke.state("paneVisible").bind(function(){n.panelLayoutCSS()}),Ce(window).resize(_.throttle(function(){n.panelLayoutCSS()},100)),n.container.on("click",".hfg--cb-devices-switcher a.switch-to",function(e){e.preventDefault();var t=Ce(this).data("device");n.switchToDevice(t)}),Se.trigger("hfg_builder_panel_loaded",[c,n])}};return e.init(s.control_id,s.items,s.devices),e},Pe=jQuery,Ae=wp.customize||null,ze=Pe(document),De={},Ae.bind("ready",function(e,t){_.each(HFG_Layout_Builder.builders,function(e,t){De[t]=new ye(e,t)}),Ae.bind("pane-contents-reflowed",function(){setTimeout(function(){0===Pe("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice .footer_moved_widgets_text").length&&Pe("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice").append('<p class="footer_moved_widgets_text">'+HFG_Layout_Builder.footer_moved_widgets_text+"</p>")},1e3)}),Ae.state("expandedSection").bind(function(e){Pe(".hfg--device-panel .grid-stack-item").removeClass("item-active"),Pe(".hfg--cb-row").removeClass("row-active"),e&&(Pe('.hfg--cb-row[data-id="'+e.id+'"]').addClass("row-active"),Pe(".hfg--device-panel .grid-stack-item.for-s-"+e.id).addClass("item-active"))})}),ze.on("click",".focus-section",function(e){e.preventDefault();var t=Pe(this).attr("data-id")||"";t||(t=(t=Pe(this).attr("href")||"").replace("#","")),t&&Ae.section(t)&&Ae.section(t).focus()}),ze.on("click",".focus-control",function(e){e.preventDefault();var t=Pe(this).attr("data-id")||"";t||(t=(t=Pe(this).attr("href")||"").replace("#","")),t&&Ae.control(t)&&Ae.control(t).focus()}),ze.on("click",".focus-panel",function(e){e.preventDefault();var t=Pe(this).attr("data-id")||"";t||(t=(t=Pe(this).attr("href")||"").replace("#","")),t&&Ae.panel(t)&&Ae.panel(t).focus()}),ze.on("mouseover",".hfg--cb-row .grid-stack-item",function(e){var t=Pe(this),i=Pe(".hfg--cb-item-remove",t).outerWidth()+Pe(".hfg--cb-item-setting",t).outerWidth();Pe(".grid-stack-item-content",t).innerWidth()-50<i&&t.addClass("show-tooltip")}),ze.on("mouseleave",".hfg--cb-row .grid-stack-item",function(e){Pe(this).removeClass("show-tooltip")}),Ae.bind("ready",function(){Ae.section.each(function(t){t.expanded.bind(function(e){var i=[];Pe(".hfg--sidebar-items .grid-stack-item .grid-stack-item-content .hfg--cb-item-name").each(function(e,t){i.push(Pe(t).data("section"))}),i.push("header_menu_icon"),i.push("hfg_header_layout_sidebar"),"header_menu_icon"===t.id?(Ae.previewedDevice.set("mobile"),Ae.previewer.send("header_sidebar_open")):-1!==i.indexOf(t.id)&&e&&"desktop"!==Ae.previewedDevice.get()?Ae.previewer.send("header_sidebar_open"):Ae.previewer.send("header_sidebar_close")})})}),ze.on("change","#nav-icon_sidebar",function(){var e=Pe(this);Ae.previewedDevice.set("mobile"),e.is(":checked")?(Pe(".hfg--cp-sidebar").show(),Ae.previewer.send("header_sidebar_open")):(Pe(".hfg--cp-sidebar").hide(),Ae.previewer.send("header_sidebar_close"))})}();
