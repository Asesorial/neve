.menu-opened {
  overflow: hidden;
}

.nv-navbar {
  background-color: $navbar_background_color;
  border-bottom: $muted-border;
}

.nv-nav-header {
  display: flex;
  padding: $spacing-xs 0;
}

#nv-primary-navigation {
  max-height: 0;
  overflow-y: auto;
  transition: $transition_long;
  a {
    width: 100%;
    display: block;
    padding: $spacing-xs 0;
  }
}

.site-logo, .navbar-toggle-wrapper {
  flex: 1;
}

.navbar-toggle-wrapper {
  justify-content: flex-end;
  display: flex;
}

#nv-primary-navigation.responsive-opened {
  max-height: 2000px;
}

.menu-item-has-children > a:after {
  @include caret(-1px);
  transform: rotate(135deg);
}

.sub-menu {
  max-height: 0;
  overflow: hidden;
  padding-left: 20px;
  transition: $transition_med;
}

.dropdown-open > .sub-menu{
  max-height: 2000px;
}

// Responsive first :) Please know SCSS.
@mixin nav-menu--laptop() {
  .nv-navbar {
    padding: $spacing-sm 0;
  }

  .nv-nav-wrap {
    flex-direction: row;
    align-items: center;
    display: flex;
  }
  .nv-nav-header {
    display: block;
    padding: 0;
  }

  #nv-primary-navigation {
    margin-left: auto;
    max-height: inherit;
    overflow: inherit;
    @include horizontal-list($spacing-sm);
    justify-content: flex-end;
    > li {
      padding: $spacing-sm 0;
      cursor: pointer;
    }
    li:hover > a {
      color: $link_hover_color;
    }
    li {
      position: relative;
    }
  }

  .sub-menu {
    max-height: 100%;
    overflow: visible;
    z-index: 10;
    visibility: hidden;
    opacity: 0;
    transition: $transition_default;
    position: absolute;
    border-top: 3px solid $link_color;
    .sub-menu {
      left: 100%;
      right: auto;
      top: -3px;
    }
    li {
      background-color: $navbar_background_color;
      border: $muted-border;
      border-top: none;
      a {
        white-space: nowrap;
        display: block;
        padding: 10px;
        width: auto;
        min-width: 180px;
      }
    }
    .menu-item-has-children {
      > a:after {
        @include caret(-1px);
        border-color: $link_color;
        transform: rotate(135deg);
        transition: $transition_default;
      }
      &:hover > a:after {
        border-color: $link-hover_color;
        transform: rotate(45deg);
      }
    }
  }

  .menu-item-has-children {
    &:hover > .sub-menu {
      display: block;
      visibility: visible;
      opacity: 1;
    }
  }

  #nv-primary-navigation > .menu-item-has-children {
    > a:after {
      @include caret(-2px);
      border-color: $link_color;
      transform: rotate(135deg);
      transition: $transition_default;
    }
    &:hover > a:after {
      transform: rotate(-45deg);
      top: 0;
      border-color: $link_hover_color;
    }
    > .sub-menu {
      left: auto;
      right: 0;
    }
  }
}